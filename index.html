<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Amazon Clicker Pro</title>
  <style>
    /* Reset & base */
    * {
      box-sizing: border-box;
      user-select: none;
    }
    body {
      margin: 0;
      background: #131921;
      color: #fff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Container layout */
    #container {
      display: flex;
      flex-grow: 1;
      max-width: 1200px;
      margin: auto;
      padding: 20px;
      gap: 30px;
      width: 100%;
    }

    /* Left (main clicker) */
    #main {
      flex: 2;
      background: #232f3e;
      border-radius: 15px;
      box-shadow: 0 0 25px #222;
      padding: 40px 30px;
      text-align: center;
      position: relative;
    }

    #title {
      font-size: 3rem;
      font-weight: 900;
      color: #ff9900;
      letter-spacing: 2px;
      margin-bottom: 15px;
      text-shadow: 1px 1px 3px #6b4e00;
    }

    #revenue {
      font-size: 2rem;
      margin-bottom: 40px;
      color: #fff;
      text-shadow: 0 0 8px #ffbb33;
      font-weight: 700;
      min-height: 40px;
    }

    #box {
      width: 200px;
      height: 200px;
      margin: auto;
      background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_box.svg/320px-Amazon_box.svg.png');
      background-repeat: no-repeat;
      background-size: contain;
      cursor: pointer;
      border-radius: 25px;
      box-shadow: 0 0 30px #ff9900aa;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      position: relative;
      user-select: none;
    }
    #box:active {
      transform: scale(0.9);
      box-shadow: 0 0 40px #ffbb33;
    }

    /* Floating money animation */
    .floating-money {
      position: absolute;
      font-weight: 900;
      color: #ffbb33;
      text-shadow: 0 0 6px #ffbb33;
      animation: floatUp 1.2s ease forwards;
      pointer-events: none;
      user-select: none;
    }
    @keyframes floatUp {
      0% {
        opacity: 1;
        transform: translateY(0);
      }
      100% {
        opacity: 0;
        transform: translateY(-100px);
      }
    }

    /* Right (sidebar upgrades) */
    #sidebar {
      flex: 1;
      background: #232f3e;
      border-radius: 15px;
      padding: 30px 20px;
      box-shadow: 0 0 20px #222;
      overflow-y: auto;
      max-height: 80vh;
    }

    #sidebar h2 {
      color: #ff9900;
      font-weight: 800;
      font-size: 1.8rem;
      margin-bottom: 25px;
      text-align: center;
      text-shadow: 1px 1px 2px #6b4e00;
      user-select: none;
    }

    .upgrade {
      background: #131921;
      margin-bottom: 18px;
      border-radius: 12px;
      padding: 15px 15px 20px 20px;
      box-shadow: inset 0 0 7px #000000aa;
      cursor: pointer;
      position: relative;
      transition: background 0.3s ease;
    }
    .upgrade:hover {
      background: #1a2738;
    }
    .upgrade.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .upgrade-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .upgrade-title {
      font-weight: 800;
      font-size: 1.1rem;
      color: #ffbb33;
    }
    .upgrade-cost {
      font-weight: 700;
      font-size: 1rem;
      color: #ff9900;
      user-select: text;
    }

    .upgrade-description {
      font-size: 0.85rem;
      color: #ddd;
      margin-bottom: 10px;
      min-height: 38px;
    }

    .upgrade-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .upgrade-count {
      font-weight: 700;
      color: #ffbb33;
      font-size: 1rem;
    }

    .upgrade-progress {
      background: #444b5e;
      border-radius: 8px;
      overflow: hidden;
      height: 10px;
      flex-grow: 1;
      margin: 0 12px;
      box-shadow: inset 0 0 5px #000000bb;
    }
    .upgrade-progress-fill {
      height: 100%;
      background: #ff9900;
      width: 0%;
      transition: width 0.3s ease;
    }

    /* Buy button */
    button.buy-btn {
      background: #ff9900;
      border: none;
      border-radius: 10px;
      color: #2b1a00;
      font-weight: 900;
      padding: 8px 14px;
      cursor: pointer;
      font-size: 1rem;
      box-shadow: 0 0 15px #ff9900cc;
      transition: background 0.3s ease;
      user-select: none;
      min-width: 90px;
    }
    button.buy-btn:hover:not(:disabled) {
      background: #ffbb33;
      box-shadow: 0 0 25px #ffbb33cc;
    }
    button.buy-btn:disabled {
      background: #555;
      cursor: not-allowed;
      box-shadow: none;
      color: #bbb;
    }

    /* Tooltip */
    .tooltip {
      position: absolute;
      background: #222b3a;
      color: #fff;
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 0.8rem;
      box-shadow: 0 0 8px #000a;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 1000;
      max-width: 240px;
      line-height: 1.2;
      user-select: none;
    }
    .tooltip.visible {
      opacity: 1;
    }

    /* Scrollbar styling */
    #sidebar::-webkit-scrollbar {
      width: 8px;
    }
    #sidebar::-webkit-scrollbar-track {
      background: #1a2738;
    }
    #sidebar::-webkit-scrollbar-thumb {
      background: #ff9900aa;
      border-radius: 10px;
    }

    /* Responsive */
    @media (max-width: 900px) {
      #container {
        flex-direction: column;
        padding: 15px;
      }
      #main, #sidebar {
        max-height: none;
        width: 100%;
      }
      #box {
        width: 160px;
        height: 160px;
      }
    }
  </style>
</head>
<body>
  <div id="container">
    <section id="main" aria-label="Main game area">
      <div id="title" aria-live="polite">Amazon Clicker</div>
      <div id="revenue" aria-live="polite">Revenue: $0</div>
      <div id="box" title="Click me to earn revenue!" role="button" tabindex="0" aria-pressed="false"></div>
    </section>

    <aside id="sidebar" aria-label="Upgrades list">
      <h2>Upgrades</h2>
      <!-- Upgrades injected here -->
    </aside>
  </div>

  <div class="tooltip" id="tooltip"></div>

  <audio id="click-sound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>
  <audio id="buy-sound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>

  <script>
    // Game state
    let revenue = 0;
    let revenuePerClick = 1;
    let revenuePerSecond = 0;

    // Load saved game
    if (localStorage.getItem('amazonClickerSave')) {
      try {
        const saved = JSON.parse(localStorage.getItem('amazonClickerSave'));
        revenue = saved.revenue || 0;
        revenuePerClick = saved.revenuePerClick || 1;
        revenuePerSecond = saved.revenuePerSecond || 0;
      } catch {}
    }

    // Upgrade data
    const upgrades = [
      {
        id: 'warehouse',
        name: "Warehouse Automation",
        description: "Automatically generate $2 revenue per second.",
        cost: 50,
        revenuePerSecond: 2,
        revenuePerClickIncrease: 0,
        count: 0,
        maxCount: 50
      },
      {
        id: 'drones',
        name: "Delivery Drones",
        description: "Automatically generate $10 revenue per second.",
        cost: 200,
        revenuePerSecond: 10,
        revenuePerClickIncrease: 0,
        count: 0,
        maxCount: 30
      },
      {
        id: 'prime',
        name: "Prime Membership",
        description: "Increase revenue per click by 5.",
        cost: 100,
        revenuePerSecond: 0,
        revenuePerClickIncrease: 5,
        count: 0,
        maxCount: 100
      },
      {
        id: 'aws',
        name: "Amazon Web Services",
        description: "Generate $50 revenue per second.",
        cost: 1000,
        revenuePerSecond: 50,
        revenuePerClickIncrease: 0,
        count: 0,
        maxCount: 20
      },
      {
        id: 'bezos_quotes',
        name: "Bezos Quotes",
        description: "Adds inspirational Bezos quotes and boosts click revenue by 10.",
        cost: 1500,
        revenuePerSecond: 0,
        revenuePerClickIncrease: 10,
        count: 0,
        maxCount: 10
      }
    ];

    // DOM elements
    const box = document.getElementById('box');
    const revenueEl = document.getElementById('revenue');
    const sidebar = document.getElementById('sidebar');
    const tooltip = document.getElementById('tooltip');
    const clickSound = document.getElementById('click-sound');
    const buySound = document.getElementById('buy-sound');

    // Format number with commas
    function formatNumber(num) {
      if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';
      if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
      if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';
      return num.toFixed(0);
    }

    // Animate revenue count
    let displayedRevenue = revenue;
    function animateRevenue() {
      if (displayedRevenue < revenue) {
        displayedRevenue += (revenue - displayedRevenue) * 0.15;
        if (Math.abs(displayedRevenue - revenue) < 1) displayedRevenue = revenue;
        revenueEl.textContent = `Revenue: $${formatNumber(displayedRevenue)}`;
      }
      requestAnimationFrame(animateRevenue);
    }

    // Floating money animation on click
    function showFloatingMoney(amount, x, y) {
      const elem = document.createElement('div');
      elem.className = 'floating-money';
      elem.textContent = `+$${amount}`;
      elem.style.left = `${x}px`;
      elem.style.top = `${y}px`;
      box.appendChild(elem);
      setTimeout(() => {
        elem.remove();
      }, 1200);
    }

    // Click handler
    box.addEventListener('click', (e) => {
      revenue += revenuePerClick;
      clickSound.currentTime = 0;
      clickSound.play();
      showFloatingMoney(formatNumber(revenuePerClick), e.offsetX, e.offsetY);
      saveGame();
    });
    box.addEventListener('keydown', (e) => {
      if (e.key === "Enter" || e.key === " ") {
        box.click();
        e.preventDefault();
      }
    });

    // Update upgrades display
    function updateUpgrades() {
      sidebar.querySelectorAll('.upgrade').forEach(upgradeEl => {
        const id = upgradeEl.dataset.id;
        const upgrade = upgrades.find(u => u.id === id);
        if (!upgrade) return;

        const cost = Math.floor(upgrade.cost * Math.pow(1.15, upgrade.count));
        const affordable = revenue >= cost && upgrade.count < upgrade.maxCount;

        upgradeEl.querySelector('.upgrade-cost').textContent = `$${formatNumber(cost)}`;
        upgradeEl.querySelector('.upgrade-count').textContent = `Owned: ${upgrade.count}`;

        // Progress bar: percentage owned relative to maxCount
        const percentOwned = (upgrade.count / upgrade.maxCount) * 100;
        upgradeEl.querySelector('.upgrade-progress-fill').style.width = `${percentOwned}%`;

        if (affordable) {
          upgradeEl.classList.remove('disabled');
          upgradeEl.querySelector('button.buy-btn').disabled = false;
        } else {
          upgradeEl.classList.add('disabled');
          upgradeEl.querySelector('button.buy-btn').disabled = true;
        }
      });
    }

    // Buy upgrade
    function buyUpgrade(id) {
      const upgrade = upgrades.find(u => u.id === id);
      if (!upgrade) return;

      const cost = Math.floor(upgrade.cost * Math.pow(1.15, upgrade.count));
      if (revenue >= cost && upgrade.count < upgrade.maxCount) {
        revenue -= cost;
        upgrade.count++;
        revenuePerClick += upgrade.revenuePerClickIncrease;
        revenuePerSecond += upgrade.revenuePerSecond;
        buySound.currentTime = 0;
        buySound.play();
        updateUpgrades();
        saveGame();
      }
    }

    // Render upgrade buttons
    function renderUpgrades() {
      upgrades.forEach(u => {
        const upgradeDiv = document.createElement('div');
        upgradeDiv.className = 'upgrade';
        upgradeDiv.dataset.id = u.id;

        upgradeDiv.innerHTML = `
          <div class="upgrade-header">
            <div class="upgrade-title" tabindex="0" aria-describedby="tooltip-${u.id}">${u.name}</div>
            <div class="upgrade-cost">$${formatNumber(u.cost)}</div>
          </div>
          <div class="upgrade-description" id="tooltip-${u.id}">${u.description}</div>
          <div class="upgrade-info">
            <div class="upgrade-count">Owned: 0</div>
            <div class="upgrade-progress"><div class="upgrade-progress-fill"></div></div>
            <button class="buy-btn" aria-label="Buy ${u.name} upgrade">Buy</button>
          </div>
        `;
        sidebar.appendChild(upgradeDiv);

        const buyBtn = upgradeDiv.querySelector('button.buy-btn');
        buyBtn.addEventListener('click', () => buyUpgrade(u.id));

        // Tooltip handlers for accessibility & mouse
        const titleEl = upgradeDiv.querySelector('.upgrade-title');
        titleEl.addEventListener('mouseenter', (e) => showTooltip(e, u.description));
        titleEl.addEventListener('mouseleave', hideTooltip);
        titleEl.addEventListener('focus', (e) => showTooltip(e, u.description));
        titleEl.addEventListener('blur', hideTooltip);
      });
      updateUpgrades();
    }

    // Tooltip
    function showTooltip(e, text) {
      tooltip.textContent = text;
      tooltip.classList.add('visible');
      const rect = e.target.getBoundingClientRect();
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      tooltip.style.top = `${rect.bottom + scrollTop + 10}px`;
      tooltip.style.left = `${rect.left + rect.width / 2}px`;
    }
    function hideTooltip() {
      tooltip.classList.remove('visible');
    }

    // Auto increment revenue per second
    setInterval(() => {
      revenue += revenuePerSecond;
      saveGame();
    }, 1000);

    // Save to localStorage
    function saveGame() {
      const saveData = {
        revenue,
        revenuePerClick,
        revenuePerSecond,
        upgrades: upgrades.map(u => ({ id: u.id, count: u.count })),
      };
      localStorage.setItem('amazonClickerSave', JSON.stringify(saveData));
      updateUpgrades();
    }

    // Load upgrades counts from saved data
    function loadUpgrades(savedUpgrades) {
      savedUpgrades.forEach(savedUpgrade => {
        const upgrade = upgrades.find(u => u.id === savedUpgrade.id);
        if (upgrade) {
          upgrade.count = savedUpgrade.count || 0;
          revenuePerClick += upgrade.revenuePerClickIncrease * upgrade.count;
          revenuePerSecond += upgrade.revenuePerSecond * upgrade.count;
        }
      });
    }

    // Init
    function init() {
      if (localStorage.getItem('amazonClickerSave')) {
        try {
          const saved = JSON.parse(localStorage.getItem('amazonClickerSave'));
          revenue = saved.revenue || 0;
          revenuePerClick = 1; // reset base
          revenuePerSecond = 0;
          if (saved.upgrades) loadUpgrades(saved.upgrades);
        } catch {}
      }
      renderUpgrades();
      animateRevenue();
    }
    init();

    // Accessibility: box keyboard aria toggle pressed
    box.addEventListener('mousedown', () => box.setAttribute('aria-pressed', 'true'));
    box.addEventListener('mouseup', () => box.setAttribute('aria-pressed', 'false'));
    box.addEventListener('mouseleave', () => box.setAttribute('aria-pressed', 'false'));

  </script>
</body>
</html>
